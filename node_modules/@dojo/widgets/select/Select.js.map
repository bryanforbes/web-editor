{"version":3,"file":"Select.js","sourceRoot":"","sources":["Select.ts"],"names":[],"mappings":"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","sourcesContent":["import { WidgetBase, onPropertiesChanged } from '@dojo/widget-core/WidgetBase';\nimport { DNode, PropertiesChangeEvent } from '@dojo/widget-core/interfaces';\nimport { ThemeableMixin, ThemeableProperties, theme } from '@dojo/widget-core/mixins/Themeable';\nimport WidgetRegistry from '@dojo/widget-core/WidgetRegistry';\nimport { v, w } from '@dojo/widget-core/d';\nimport uuid from '@dojo/core/uuid';\nimport { assign } from '@dojo/core/lang';\nimport { find, includes } from '@dojo/shim/array';\nimport { Keys } from '../common/util';\nimport Label, { LabelOptions } from '../label/Label';\nimport SelectOption, { OptionData } from './SelectOption';\nimport * as css from './styles/select.m.css';\nimport * as iconCss from '../common/styles/icons.m.css';\n\n/**\n * @type SelectProperties\n *\n * Properties that can be set on a Select component\n *\n * @property customOption   Custom widget constructor for options. Should use SelectOption as a base\n * @property describedBy    ID of an element that provides more descriptive text\n * @property disabled       Prevents the user from interacting with the form field\n * @property formId         ID of a form element associated with the form field\n * @property invalid        Indicates the value entered in the form field is invalid\n * @property label          Label settings for form label text, position, and visibility\n * @property multiple       Whether the widget supports multiple selection\n * @property name           The form widget's name\n * @property options        Array of data for the select options' value, text content, and state\n * @property readOnly       Allows or prevents user interaction\n * @property required       Whether or not a value is required\n * @property useNatveSelect Use the native <select> element if true\n * @property value          The current value\n * @property onBlur         Called when the input loses focus\n * @property onChange       Called when the node's 'change' event is fired\n * @property onClick        Called when the input is clicked\n * @property onFocus        Called when the input is focused\n * @property onKeyDown      Called on the input's keydown event\n */\nexport interface SelectProperties extends ThemeableProperties {\n\tcustomOption?: any;\n\tdescribedBy?: string;\n\tdisabled?: boolean;\n\tformId?: string;\n\tinvalid?: boolean;\n\tlabel?: string | LabelOptions;\n\tmultiple?: boolean;\n\tname?: string;\n\toptions?: OptionData[];\n\treadOnly?: boolean;\n\trequired?: boolean;\n\tuseNativeElement?: boolean;\n\tvalue?: string;\n\tonBlur?(event: FocusEvent): void;\n\tonChange?(option: OptionData): void;\n\tonClick?(event: MouseEvent): void;\n\tonFocus?(event: FocusEvent): void;\n\tonKeyDown?(event: KeyboardEvent): void;\n}\n\nexport const SelectBase = ThemeableMixin(WidgetBase);\n\n@theme(css)\n@theme(iconCss)\nexport default class Select extends SelectBase<SelectProperties> {\n\tprivate _focusedIndex = 0;\n\tprivate _ignoreBlur = false;\n\tprivate _open = false;\n\tprivate _selectId = uuid();\n\tprivate _registry: WidgetRegistry;\n\n\tprivate _onBlur (event: FocusEvent) { this.properties.onBlur && this.properties.onBlur(event); }\n\tprivate _onClick (event: MouseEvent) { this.properties.onClick && this.properties.onClick(event); }\n\tprivate _onFocus (event: FocusEvent) { this.properties.onFocus && this.properties.onFocus(event); }\n\tprivate _onKeyDown (event: KeyboardEvent) { this.properties.onKeyDown && this.properties.onKeyDown(event); }\n\n\tprivate _createRegistry(customOption: any) {\n\t\tconst registry = new WidgetRegistry();\n\t\tregistry.define('select-option', customOption);\n\n\t\treturn registry;\n\t}\n\n\t// native select events\n\tprivate _onNativeChange (event: Event) {\n\t\tconst {\n\t\t\toptions = [],\n\t\t\tonChange\n\t\t} = this.properties;\n\t\tconst value = (<HTMLInputElement> event.target).value;\n\t\tconst option = find(options, (option: OptionData) => option.value === value);\n\t\tonChange && onChange(option);\n\t}\n\n\t// custom select events\n\tprivate _openSelect() {\n\t\tthis._open = true;\n\t\tthis._ignoreBlur = false;\n\t\tthis._focusedIndex = this._focusedIndex || 0;\n\t\tthis.invalidate();\n\t}\n\n\tprivate _closeSelect() {\n\t\tthis._open = false;\n\t\tthis.invalidate();\n\t}\n\n\tprivate _onTriggerClick(event: MouseEvent) {\n\t\tthis.properties.onClick && this.properties.onClick(event);\n\n\t\tthis._open ? this._closeSelect() : this._openSelect();\n\t}\n\n\tprivate _onTriggerBlur(event: FocusEvent) {\n\t\tif (!this._ignoreBlur) {\n\t\t\tthis.properties.onBlur && this.properties.onBlur(event);\n\t\t\tthis._closeSelect();\n\t\t}\n\t}\n\n\tprivate _onOptionMouseDown() {\n\t\tthis._ignoreBlur = true;\n\t}\n\n\tprivate _onOptionClick(event: MouseEvent, index: number) {\n\t\tconst {\n\t\t\toptions = [],\n\t\t\tonChange,\n\t\t\tonClick\n\t\t} = this.properties;\n\n\t\tonClick && onClick(event);\n\n\t\tconst option = options[index];\n\n\t\t// if the option exists and isn't disabled, focus it and fire onChange\n\t\tif (option && !option.disabled) {\n\t\t\tthis._focusedIndex = index;\n\t\t\tonChange && onChange(option);\n\t\t}\n\t\telse {\n\t\t\t// prevent the menu from closing when clicking on disabled options\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tprivate _onListboxKeyDown(event: KeyboardEvent) {\n\t\tthis.properties.onKeyDown && this.properties.onKeyDown(event);\n\n\t\tconst {\n\t\t\toptions = [],\n\t\t\tmultiple,\n\t\t\tonChange\n\t\t} = this.properties;\n\t\tconst { _focusedIndex } = this;\n\n\t\tswitch (event.which) {\n\t\t\tcase Keys.Enter:\n\t\t\t\tif (options[_focusedIndex].disabled) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tonChange && onChange(options[_focusedIndex]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase Keys.Space:\n\t\t\t\tif (options[_focusedIndex].disabled) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tonChange && onChange(options[_focusedIndex]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase Keys.Escape:\n\t\t\t\tthis._closeSelect();\n\t\t\t\tbreak;\n\t\t\tcase Keys.Down:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (this._open || multiple) {\n\t\t\t\t\tthis._focusedIndex = (_focusedIndex + 1) % options.length;\n\t\t\t\t} else {\n\t\t\t\t\tthis._openSelect();\n\t\t\t\t}\n\t\t\t\tthis.invalidate();\n\t\t\t\tbreak;\n\t\t\tcase Keys.Up:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis._focusedIndex = (_focusedIndex - 1 + options.length) % options.length;\n\t\t\t\tthis.invalidate();\n\t\t\t\tbreak;\n\t\t\tcase Keys.Home:\n\t\t\t\tthis._focusedIndex = 0;\n\t\t\t\tthis.invalidate();\n\t\t\t\tbreak;\n\t\t\tcase Keys.End:\n\t\t\t\tthis._focusedIndex = options.length - 1;\n\t\t\t\tthis.invalidate();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate _renderCustomOptions(): DNode[] {\n\t\tconst {\n\t\t\tmultiple,\n\t\t\toptions = [],\n\t\t\tvalue,\n\t\t\ttheme\n\t\t} = this.properties;\n\n\t\tconst optionNodes = options.map((option, i) => w<SelectOption>('select-option', {\n\t\t\tfocused: this._focusedIndex === i,\n\t\t\tindex: i,\n\t\t\tkey: i + '',\n\t\t\toptionData: assign({}, option, <any> {\n\t\t\t\tid: option.id,\n\t\t\t\tselected: multiple ? option.selected : value === option.value\n\t\t\t}),\n\t\t\tonMouseDown: this._onOptionMouseDown,\n\t\t\tonClick: this._onOptionClick,\n\t\t\ttheme\n\t\t}));\n\n\t\treturn optionNodes;\n\t}\n\n\t@onPropertiesChanged()\n\tprotected onPropertiesChanged(evt: PropertiesChangeEvent<this, SelectProperties>) {\n\t\tconst {\n\t\t\tcustomOption = SelectOption,\n\t\t\toptions = []\n\t\t} = this.properties;\n\n\t\t// update custom option registry\n\t\tif ( !this._registry || includes(evt.changedPropertyKeys, 'customOption')) {\n\t\t\tconst registry = this._createRegistry(customOption);\n\t\t\tif (this._registry) {\n\t\t\t\tthis.registries.replace(this._registry, registry);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.registries.add(registry);\n\t\t\t}\n\t\t\tthis._registry = registry;\n\t\t}\n\n\t\t// add ids to options for use with aria-activedescendant\n\t\tif (includes(evt.changedPropertyKeys, 'options')) {\n\t\t\toptions.forEach((option) => {\n\t\t\t\toption.id = option.id || uuid();\n\t\t\t});\n\t\t}\n\t}\n\n\trenderNativeSelect(): DNode {\n\t\tconst {\n\t\t\tdescribedBy,\n\t\t\tdisabled,\n\t\t\tinvalid,\n\t\t\tmultiple,\n\t\t\tname,\n\t\t\toptions = [],\n\t\t\treadOnly,\n\t\t\trequired,\n\t\t\tvalue\n\t\t} = this.properties;\n\n\t\t/* create option nodes */\n\t\tconst optionNodes = options.map(option => v('option', {\n\t\t\tvalue: option.value,\n\t\t\tinnerHTML: option.label,\n\t\t\tdisabled: option.disabled,\n\t\t\tselected: option.selected && multiple ? option.selected : null\n\t\t}));\n\n\t\treturn v('div', { classes: this.classes(css.inputWrapper) }, [\n\t\t\tv('select', {\n\t\t\t\tclasses: this.classes(css.input),\n\t\t\t\t'aria-describedby': describedBy,\n\t\t\t\tdisabled,\n\t\t\t\t'aria-invalid': invalid ? 'true' : null,\n\t\t\t\tmultiple: multiple ? true : null,\n\t\t\t\tname,\n\t\t\t\treadOnly,\n\t\t\t\t'aria-readonly': readOnly ? 'true' : null,\n\t\t\t\trequired,\n\t\t\t\tvalue,\n\t\t\t\tonblur: this._onBlur,\n\t\t\t\tonchange: this._onNativeChange,\n\t\t\t\tonclick: this._onClick,\n\t\t\t\tonfocus: this._onFocus,\n\t\t\t\tonkeydown: this._onKeyDown\n\t\t\t}, optionNodes),\n\t\t\tv('span', { classes: this.classes(css.nativeArrow) }, [\n\t\t\t\tv('i', { classes: this.classes(iconCss.icon, iconCss.downIcon),\n\t\t\t\t\trole: 'presentation', 'aria-hidden': 'true'\n\t\t\t\t})\n\t\t\t])\n\t\t]);\n\t}\n\n\trenderCustomMultiSelect(): DNode {\n\t\tconst {\n\t\t\t_focusedIndex\n\t\t} = this;\n\t\tconst {\n\t\t\tdescribedBy,\n\t\t\tdisabled,\n\t\t\tinvalid,\n\t\t\toptions = [],\n\t\t\treadOnly,\n\t\t\trequired\n\t\t} = this.properties;\n\n\t\treturn v('div', { classes: this.classes(css.inputWrapper) }, [\n\t\t\tv('div', {\n\t\t\t\trole: 'listbox',\n\t\t\t\tclasses: this.classes(css.input),\n\t\t\t\tdisabled,\n\t\t\t\t'aria-describedby': describedBy,\n\t\t\t\t'aria-invalid': invalid ? 'true' : null,\n\t\t\t\t'aria-multiselectable': 'true',\n\t\t\t\t'aria-activedescendant': options.length > 0 ? options[_focusedIndex].id : null,\n\t\t\t\t'aria-readonly': readOnly ? 'true' : null,\n\t\t\t\t'aria-required': required ? 'true' : null,\n\t\t\t\ttabIndex: 0,\n\t\t\t\tonblur: this._onBlur,\n\t\t\t\tonfocus: this._onFocus,\n\t\t\t\tonkeydown: this._onListboxKeyDown\n\t\t\t}, this._renderCustomOptions())\n\t\t]);\n\t}\n\n\trenderCustomSelect(): DNode {\n\t\tconst {\n\t\t\tdescribedBy,\n\t\t\tdisabled,\n\t\t\tinvalid,\n\t\t\toptions = [],\n\t\t\treadOnly,\n\t\t\trequired,\n\t\t\tvalue\n\t\t} = this.properties;\n\n\t\tconst {\n\t\t\t_open,\n\t\t\t_focusedIndex,\n\t\t\t_selectId\n\t\t} = this;\n\n\t\tconst selectedOption = find(options, (option: OptionData) => option.value === value) || options[0];\n\n\t\t// create dropdown trigger and select box\n\t\treturn v('div', {\n\t\t\tclasses: this.classes(css.inputWrapper, _open ? css.open : null)\n\t\t}, [\n\t\t\tv('button', {\n\t\t\t\tclasses: this.classes(css.trigger, css.input),\n\t\t\t\tdisabled,\n\t\t\t\t'aria-controls': _selectId,\n\t\t\t\t'aria-owns': _selectId,\n\t\t\t\t'aria-expanded': _open + '',\n\t\t\t\t'aria-haspopup': 'listbox',\n\t\t\t\t'aria-activedescendant': options.length > 0 ? options[_focusedIndex].id : null,\n\t\t\t\tvalue,\n\t\t\t\tonblur: this._onTriggerBlur,\n\t\t\t\tonclick: this._onTriggerClick,\n\t\t\t\tonfocus: this._onFocus,\n\t\t\t\tonkeydown: this._onListboxKeyDown\n\t\t\t}, [\n\t\t\t\tselectedOption ? selectedOption.label : '',\n\t\t\t\tv('i', { classes: this.classes(iconCss.icon, iconCss.downIcon) })\n\t\t\t]),\n\t\t\tv('div', {\n\t\t\t\trole: 'listbox',\n\t\t\t\tid: _selectId,\n\t\t\t\tclasses: this.classes(css.dropdown),\n\t\t\t\t'aria-describedby': describedBy,\n\t\t\t\t'aria-invalid': invalid ? 'true' : null,\n\t\t\t\t'aria-readonly': readOnly ? 'true' : null,\n\t\t\t\t'aria-required': required ? 'true' : null\n\t\t\t}, this._renderCustomOptions())\n\t\t]);\n\t}\n\n\trender(): DNode {\n\t\tconst {\n\t\t\tdisabled,\n\t\t\tformId,\n\t\t\tinvalid,\n\t\t\tlabel,\n\t\t\tmultiple,\n\t\t\treadOnly,\n\t\t\trequired,\n\t\t\tuseNativeElement = false,\n\t\t\ttheme\n\t\t} = this.properties;\n\n\t\tconst stateClasses = [\n\t\t\tdisabled ? css.disabled : null,\n\t\t\tinvalid ? css.invalid : null,\n\t\t\tinvalid === false ? css.valid : null,\n\t\t\tmultiple ? css.multiselect : null,\n\t\t\treadOnly ? css.readonly : null,\n\t\t\trequired ? css.required : null\n\t\t];\n\n\t\tlet rootWidget, select;\n\n\t\tif (useNativeElement) {\n\t\t\tselect = this.renderNativeSelect();\n\t\t}\n\t\telse {\n\t\t\tselect = multiple ? this.renderCustomMultiSelect() : this.renderCustomSelect();\n\t\t}\n\n\t\tif (label) {\n\t\t\trootWidget = w(Label, {\n\t\t\t\tclasses: this.classes(css.root, ...stateClasses),\n\t\t\t\tformId,\n\t\t\t\tlabel,\n\t\t\t\tregistry: this._registry,\n\t\t\t\ttheme\n\t\t\t}, [ select ]);\n\t\t}\n\t\telse {\n\t\t\trootWidget = v('div', {\n\t\t\t\tclasses: this.classes(css.root, ...stateClasses)\n\t\t\t}, [ select ]);\n\t\t}\n\n\t\treturn rootWidget;\n\t}\n}\n"]}