{"version":3,"file":"Dialog.js","sourceRoot":"","sources":["Dialog.ts"],"names":[],"mappings":"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","sourcesContent":["import { DNode } from '@dojo/widget-core/interfaces';\nimport { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport { ThemeableMixin, ThemeableProperties, theme } from '@dojo/widget-core/mixins/Themeable';\nimport { v } from '@dojo/widget-core/d';\nimport uuid from '@dojo/core/uuid';\n\nimport * as css from './styles/dialog.m.css';\nimport * as iconCss from '../common/styles/icons.m.css';\nimport * as animations from '../common/styles/animations.m.css';\n\n/**\n * The role of this dialog, used for accessibility\n */\nexport type RoleType = 'dialog' | 'alertdialog';\n\n/**\n * @type DialogProperties\n *\n * Properties that can be set on a Dialog component\n *\n * @property closeable          Determines whether the dialog can be closed\n * @property closeText          Hidden text used by screen readers to display for the close button\n * @property enterAnimation     CSS class to apply to the dialog when opened\n * @property exitAnimation      CSS class to apply to the dialog when closed\n * @property modal              Determines whether the dialog can be closed by clicking outside its content\n * @property onOpen             Called when the dialog opens\n * @property onRequestClose     Called when the dialog is closed\n * @property open               Determines whether the dialog is open or closed\n * @property role               Role of this dialog for accessibility, either 'alert' or 'dialog'\n * @property title              Title to show in the dialog title bar\n * @property underlay           Determines whether a semi-transparent background shows behind the dialog\n */\nexport interface DialogProperties extends ThemeableProperties {\n\tcloseable?: boolean;\n\tcloseText?: string;\n\tenterAnimation?: string;\n\texitAnimation?: string;\n\tmodal?: boolean;\n\tonOpen?(): void;\n\tonRequestClose?(): void;\n\topen?: boolean;\n\trole?: RoleType;\n\ttitle?: string;\n\tunderlay?: boolean;\n};\n\nexport const DialogBase = ThemeableMixin(WidgetBase);\n\n@theme(css)\n@theme(iconCss)\nexport default class Dialog extends DialogBase<DialogProperties> {\n\tprivate _titleId = uuid();\n\tprivate _wasOpen: boolean;\n\n\tprivate _onCloseClick() {\n\t\tconst {\n\t\t\tcloseable = true,\n\t\t\tonRequestClose\n\t\t} = this.properties;\n\n\t\tcloseable && onRequestClose && onRequestClose();\n\t}\n\n\tprivate _onUnderlayClick() {\n\t\t!this.properties.modal && this._onCloseClick();\n\t}\n\n\trender(): DNode {\n\t\tconst {\n\t\t\tcloseable = true,\n\t\t\tcloseText = 'close dialog',\n\t\t\tenterAnimation = animations.fadeIn,\n\t\t\texitAnimation = animations.fadeOut,\n\t\t\tonOpen,\n\t\t\topen = false,\n\t\t\trole = 'dialog',\n\t\t\ttitle = '',\n\t\t\tunderlay\n\t\t} = this.properties;\n\n\t\topen && !this._wasOpen && onOpen && onOpen();\n\n\t\tthis._wasOpen = open;\n\n\t\treturn v('div', { classes: this.classes(css.root) }, open ? [\n\t\t\tv('div', {\n\t\t\t\tclasses: this.classes(underlay ? css.underlayVisible : null).fixed(css.underlay),\n\t\t\t\tenterAnimation: animations.fadeIn,\n\t\t\t\texitAnimation: animations.fadeOut,\n\t\t\t\tkey: 'underlay',\n\t\t\t\tonclick: this._onUnderlayClick\n\t\t\t}),\n\t\t\tv('div', {\n\t\t\t\t'aria-labelledby': this._titleId,\n\t\t\t\tclasses: this.classes(css.main),\n\t\t\t\tenterAnimation,\n\t\t\t\texitAnimation,\n\t\t\t\tkey: 'main',\n\t\t\t\trole\n\t\t\t}, [\n\t\t\t\tv('div', {\n\t\t\t\t\tclasses: this.classes(css.title),\n\t\t\t\t\tkey: 'title'\n\t\t\t\t}, [\n\t\t\t\t\tv('div', { id: this._titleId }, [ title ]),\n\t\t\t\t\tcloseable ? v('button', {\n\t\t\t\t\t\tclasses: this.classes(css.close),\n\t\t\t\t\t\tonclick: this._onCloseClick\n\t\t\t\t\t}, [\n\t\t\t\t\t\tcloseText,\n\t\t\t\t\t\tv('i', { classes: this.classes(iconCss.icon, iconCss.closeIcon),\n\t\t\t\t\t\t\trole: 'presentation', 'aria-hidden': 'true'\n\t\t\t\t\t\t})\n\t\t\t\t\t]) : null\n\t\t\t\t]),\n\t\t\t\tv('div', {\n\t\t\t\t\tclasses: this.classes(css.content),\n\t\t\t\t\tkey: 'content'\n\t\t\t\t}, this.children)\n\t\t\t])\n\t\t] : []);\n\t}\n}\n"]}