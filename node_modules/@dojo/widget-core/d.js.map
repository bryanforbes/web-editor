{"version":3,"file":"d.js","sourceRoot":"","sources":["d.ts"],"names":[],"mappings":";;;;;;;;;;;IAAA,wCAAyC;IAEzC,4CAAuC;IACvC,qCAA8C;IAW9C,mDAAkD;IAElD;;OAEG;IACU,QAAA,KAAK,GAAG,gBAAM,CAAC,yBAAyB,CAAC,CAAC;IAEvD;;OAEG;IACU,QAAA,KAAK,GAAG,gBAAM,CAAC,yBAAyB,CAAC,CAAC;IAEvD;;OAEG;IACH,iBAAoF,KAAe;QAClG,MAAM,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,OAAO,KAAK,KAAK,QAAQ,CAAC,IAAI,KAAK,CAAC,IAAI,KAAK,aAAK,CAAC,CAAC;IAC9E,CAAC;IAFD,0BAEC;IAED;;OAEG;IACH,iBAAwB,KAAY;QACnC,MAAM,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,OAAO,KAAK,KAAK,QAAQ,CAAC,IAAI,KAAK,CAAC,IAAI,KAAK,aAAK,CAAC,CAAC;IAC9E,CAAC;IAFD,0BAEC;IAaD,kBAAyB,MAAuB,EAAE,QAAgC,EAAE,SAAqC;QACxH,IAAI,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,GAAQ,MAAM,WAAK,CAAE,MAAM,CAAE,CAAC;QAC/D,OAAO,KAAK,CAAC,MAAM,EAAE,CAAC;YACrB,IAAM,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;YACzB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACV,EAAE,CAAC,CAAC,CAAC,SAAS,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBACnC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBAChB,CAAC;gBACD,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACvD,KAAK,GAAQ,KAAK,QAAK,IAAI,CAAC,QAAQ,CAAE,CAAC;gBACxC,CAAC;YACF,CAAC;QACF,CAAC;QACD,MAAM,CAAC,MAAM,CAAC;IACf,CAAC;IAdD,4BAcC;IAED;;OAEG;IACU,QAAA,QAAQ,GAAG,IAAI,+BAAc,EAAE,CAAC;IAE7C;;OAEG;IACH,WAAiD,iBAAiD,EAAE,UAA2B,EAAE,QAA4B;QAA5B,yBAAA,EAAA,aAA4B;QAE5J,MAAM,CAAC;YACN,QAAQ,UAAA;YACR,iBAAiB,mBAAA;YACjB,UAAU,YAAA;YACV,IAAI,EAAE,aAAK;SACX,CAAC;IACH,CAAC;IARD,cAQC;IAQD,WAAkB,GAAW,EAAE,oBAAyD,EAAE,QAAsB;QAAjF,qCAAA,EAAA,yBAAyD;QAAE,yBAAA,EAAA,aAAsB;QAC9G,IAAI,UAAU,GAAyB,oBAAoB,CAAC;QAE5D,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;YACzC,QAAQ,GAAG,oBAAoB,CAAC;YAChC,UAAU,GAAG,EAAE,CAAC;QACjB,CAAC;QAED,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;YACV,IAAA,4BAAO,CAAgB;YAC7B,EAAE,CAAC,CAAC,OAAO,OAAO,KAAK,UAAU,CAAC,CAAC,CAAC;gBACnC,OAAO,GAAG,OAAO,EAAE,CAAC;gBACpB,UAAU,GAAG,aAAM,CAAC,UAAU,EAAE,EAAE,OAAO,SAAA,EAAE,CAAC,CAAC;YAC9C,CAAC;QACF,CAAC;QAED,MAAM,CAAC;YACN,GAAG,KAAA;YACH,QAAQ,UAAA;YACR,UAAU,YAAA;YACV,MAAM;gBAEL,MAAM,CAAC,YAAC,CAAC,GAAG,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;YAC7C,CAAC;YACD,IAAI,EAAE,aAAK;SACX,CAAC;IACJ,CAAC;IA1BD,cA0BC","sourcesContent":["import { assign } from '@dojo/core/lang';\nimport { VNode } from '@dojo/interfaces/vdom';\nimport Symbol from '@dojo/shim/Symbol';\nimport { h, VNodeProperties } from 'maquette';\nimport {\n\tConstructor,\n\tDefaultWidgetBaseInterface,\n\tDNode,\n\tHNode,\n\tRegistryLabel,\n\tVirtualDomProperties,\n\tWidgetBaseInterface,\n\tWNode\n} from './interfaces';\nimport { WidgetRegistry } from './WidgetRegistry';\n\n/**\n * The symbol identifier for a WNode type\n */\nexport const WNODE = Symbol('Identifier for a WNode.');\n\n/**\n * The symbol identifier for a HNode type\n */\nexport const HNODE = Symbol('Identifier for a HNode.');\n\n/**\n * Helper function that returns true if the `DNode` is a `WNode` using the `type` property\n */\nexport function isWNode<W extends WidgetBaseInterface = DefaultWidgetBaseInterface>(child: DNode<W>): child is WNode<W> {\n\treturn Boolean(child && (typeof child !== 'string') && child.type === WNODE);\n}\n\n/**\n * Helper function that returns true if the `DNode` is a `HNode` using the `type` property\n */\nexport function isHNode(child: DNode): child is HNode {\n\treturn Boolean(child && (typeof child !== 'string') && child.type === HNODE);\n}\n\n/**\n * Generic decorate function for DNodes. The nodes are modified in place based on the provided predicate\n * and modifier functions.\n *\n * The children of each node are flattened and added to the array for decoration.\n *\n * If no predicate is supplied then the modifier will be executed on all nodes.\n */\nexport function decorate(dNodes: DNode, modifier: (dNode: DNode) => void, predicate?: (dNode: DNode) => boolean): DNode;\nexport function decorate(dNodes: DNode[], modifier: (dNode: DNode) => void, predicate?: (dNode: DNode) => boolean): DNode[];\nexport function decorate(dNodes: DNode | DNode[], modifier: (dNode: DNode) => void, predicate?: (dNode: DNode) => boolean): DNode | DNode[];\nexport function decorate(dNodes: DNode | DNode[], modifier: (dNode: DNode) => void, predicate?: (dNode: DNode) => boolean): DNode | DNode[] {\n\tlet nodes = Array.isArray(dNodes) ? [ ...dNodes ] : [ dNodes ];\n\twhile (nodes.length) {\n\t\tconst node = nodes.pop();\n\t\tif (node) {\n\t\t\tif (!predicate || predicate(node)) {\n\t\t\t\tmodifier(node);\n\t\t\t}\n\t\t\tif ((isWNode(node) || isHNode(node)) && node.children) {\n\t\t\t\tnodes = [ ...nodes, ...node.children ];\n\t\t\t}\n\t\t}\n\t}\n\treturn dNodes;\n}\n\n/**\n * Global widget registry instance\n */\nexport const registry = new WidgetRegistry();\n\n/**\n * Wrapper function for calls to create a widget.\n */\nexport function w<W extends WidgetBaseInterface>(widgetConstructor: Constructor<W> | RegistryLabel, properties: W['properties'], children: W['children'] = []): WNode<W> {\n\n\treturn {\n\t\tchildren,\n\t\twidgetConstructor,\n\t\tproperties,\n\t\ttype: WNODE\n\t};\n}\n\n/**\n * Wrapper function for calls to create hyperscript, lazily executes the hyperscript creation\n */\nexport function v(tag: string, properties: VirtualDomProperties, children?: DNode[]): HNode;\nexport function v(tag: string, children: DNode[]): HNode;\nexport function v(tag: string): HNode;\nexport function v(tag: string, propertiesOrChildren: VirtualDomProperties | DNode[] = {}, children: DNode[] = []): HNode {\n\t\tlet properties: VirtualDomProperties = propertiesOrChildren;\n\n\t\tif (Array.isArray(propertiesOrChildren)) {\n\t\t\tchildren = propertiesOrChildren;\n\t\t\tproperties = {};\n\t\t}\n\n\t\tif (properties) {\n\t\t\tlet { classes } = properties;\n\t\t\tif (typeof classes === 'function') {\n\t\t\t\tclasses = classes();\n\t\t\t\tproperties = assign(properties, { classes });\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttag,\n\t\t\tchildren,\n\t\t\tproperties,\n\t\t\trender(this: { vNodes: VNode[], properties: VNodeProperties }) {\n\n\t\t\t\treturn h(tag, this.properties, this.vNodes);\n\t\t\t},\n\t\t\ttype: HNODE\n\t\t};\n}\n"]}