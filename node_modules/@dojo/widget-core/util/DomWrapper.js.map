{"version":3,"file":"DomWrapper.js","sourceRoot":"","sources":["DomWrapper.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;IAAA,8CAA6C;IAE7C,0BAA+B;IAC/B,wCAAyC;IAOzC;QAAgC,8BAAgC;QAAhE;;QAyDA,CAAC;QArDO,gCAAW,GAAlB;YACC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAClD,CAAC;QAEM,gCAAW,GAAlB;YACC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAClD,CAAC;QAEM,+BAAU,GAAjB;YACC,IAAM,KAAK,GAAG,iBAAM,UAAU,WAAE,CAAC;YACjC,EAAE,CAAC,CAAC,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;gBACxC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;oBAClB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACrB,CAAC;YACF,CAAC;YACD,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;YACzB,CAAC;YAED,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAES,2BAAM,GAAhB;YACC,IAAM,KAAK,GAAG,iBAAM,MAAM,WAAE,CAAC;YAC7B,EAAE,CAAC,CAAC,WAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBACd,IAAA,SAAmC,EAAjC,4BAAW,EAAE,4BAAW,CAAU;gBAE1C,aAAM,CAAC,KAAK,CAAC,UAAU,EAAE;oBACxB,WAAW,aAAA;oBACX,WAAW,aAAA;iBACX,CAAC,CAAC;YACJ,CAAC;YAED,MAAM,CAAC,KAAK,CAAC;QACd,CAAC;QAEO,uCAAkB,GAA1B,UAA2B,OAAgC;YAC1D,IAAI,WAAW,GAAG,OAAO,CAAC;YAE1B,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;gBAClB,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,sBAAsB;YACpE,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjB,uDAAuD;gBACvD,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;oBAC3D,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,YAAY,CAAC,WAAW,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;gBAC/E,CAAC;gBAED,wCAAwC;gBACxC,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,WAAW,CAAC;YACnC,CAAC;QACF,CAAC;QACF,iBAAC;IAAD,CAAC,AAzDD,CAAgC,uBAAU,GAyDzC;IAzDY,gCAAU;IA2DvB,kBAAe,UAAU,CAAC","sourcesContent":["import { WidgetBase } from './../WidgetBase';\nimport { DNode, WidgetProperties } from './../interfaces';\nimport { isHNode } from '../d';\nimport { assign } from '@dojo/core/lang';\nimport { VNode } from '@dojo/interfaces/vdom';\n\nexport interface DomWrapperProperties extends WidgetProperties {\n\tdomNode: Node;\n}\n\nexport class DomWrapper extends WidgetBase<DomWrapperProperties> {\n\n\tprivate _vNode: VNode | undefined;\n\n\tpublic afterCreate() {\n\t\tthis.handleDomInsertion(this.properties.domNode);\n\t}\n\n\tpublic afterUpdate() {\n\t\tthis.handleDomInsertion(this.properties.domNode);\n\t}\n\n\tpublic __render__() {\n\t\tconst vNode = super.__render__();\n\t\tif (vNode && typeof vNode !== 'string') {\n\t\t\tif (!this._vNode) {\n\t\t\t\tthis._vNode = vNode;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis._vNode = undefined;\n\t\t}\n\n\t\treturn vNode;\n\t}\n\n\tprotected render(): DNode {\n\t\tconst dNode = super.render();\n\t\tif (isHNode(dNode)) {\n\t\t\tconst { afterCreate, afterUpdate } = this;\n\n\t\t\tassign(dNode.properties, {\n\t\t\t\tafterCreate,\n\t\t\t\tafterUpdate\n\t\t\t});\n\t\t}\n\n\t\treturn dNode;\n\t}\n\n\tprivate handleDomInsertion(newNode: Node | null | undefined) {\n\t\tlet notNullNode = newNode;\n\n\t\tif (!notNullNode) {\n\t\t\tnotNullNode = document.createElement('div'); // placeholder element\n\t\t}\n\n\t\tif (this._vNode) {\n\t\t\t// replace the vNode domElement with our new element...\n\t\t\tif (this._vNode.domNode && this._vNode.domNode.parentNode) {\n\t\t\t\tthis._vNode.domNode.parentNode.replaceChild(notNullNode, this._vNode.domNode);\n\t\t\t}\n\n\t\t\t// and update the reference to our vnode\n\t\t\tthis._vNode.domNode = notNullNode;\n\t\t}\n\t}\n}\n\nexport default DomWrapper;\n"]}