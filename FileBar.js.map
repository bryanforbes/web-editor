{"version":3,"file":"FileBar.js","sourceRoot":"","sources":["../src/FileBar.ts"],"names":[],"mappings":"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","sourcesContent":["import uuid from '@dojo/core/uuid';\nimport { v, w } from '@dojo/widget-core/d';\nimport { DNode, WNode } from '@dojo/widget-core/interfaces';\nimport { theme, ThemeableMixin, ThemeableProperties } from '@dojo/widget-core/mixins/Themeable';\nimport { WidgetBase } from '@dojo/widget-core/WidgetBase';\nimport TabButton from '@dojo/widgets/tabpane/TabButton';\nimport * as css from '@dojo/widgets/tabpane/styles/tabPane.m.css';\n\nconst ThemeableBase = ThemeableMixin(WidgetBase);\n\nexport const enum Align {\n\tbottom,\n\tleft,\n\tright,\n\ttop\n}\n\nexport interface FileItem extends ThemeableProperties {\n\tcloseable?: boolean;\n\tdisabled?: boolean;\n\tkey: string;\n\tlabel: DNode;\n}\n\nexport interface FileBarProperties extends ThemeableProperties {\n\tactiveIndex: number;\n\talignButtons?: Align;\n\tfiles: FileItem[];\n\n\tonRequestTabChange?(file: FileItem, index: number): void;\n\tonRequestTabClose?(file: FileItem, index: number): void;\n}\n\n@theme(css)\nexport default class FileBar extends ThemeableBase<FileBarProperties> {\n\tprivate _id = uuid();\n\t// private _callTabFocus = false;\n\n\tprivate _onDownArrowPress() {\n\t\tconst { alignButtons } = this.properties;\n\n\t\tif (alignButtons === Align.left || alignButtons === Align.right) {\n\t\t\tthis.selectNextIndex();\n\t\t}\n\t}\n\n\tprivate _onLeftArrowPress() {\n\t\tthis.selectPreviousIndex();\n\t}\n\n\tprivate _onRightArrowPress() {\n\t\tthis.selectNextIndex();\n\t}\n\n\tprivate _onUpArrowPress() {\n\t\tconst { alignButtons } = this.properties;\n\n\t\tif (alignButtons === Align.left || alignButtons === Align.right) {\n\t\t\tthis.selectPreviousIndex();\n\t\t}\n\t}\n\n\tprivate _renderTabButtons(): WNode<TabButton>[] {\n\t\tconst { files, theme } = this.properties;\n\t\treturn files.map((file, i) => {\n\t\t\tconst {\n\t\t\t\tcloseable,\n\t\t\t\tdisabled,\n\t\t\t\tkey,\n\t\t\t\tlabel = null\n\t\t\t} = file;\n\n\t\t\treturn w(TabButton, {\n\t\t\t\t// TODO: uncomment when TabButton published with https://github.com/dojo/widgets/pull/241\n\t\t\t\t// callFocus: this._callTabFocus && i === this.properties.activeIndex,\n\t\t\t\tactive: i === this.properties.activeIndex,\n\t\t\t\tcloseable,\n\t\t\t\tcontrols: `${ this._id }-tab-${i}`,\n\t\t\t\tdisabled,\n\t\t\t\tid: `${ this._id }-tabbutton-${i}`,\n\t\t\t\tindex: i,\n\t\t\t\tkey,\n\t\t\t\tonClick: this.selectIndex,\n\t\t\t\tonCloseClick: this.closeIndex,\n\t\t\t\tonEndPress: this.selectLastIndex,\n\t\t\t\t// onFocusCalled: () => this._callTabFocus = false,\n\t\t\t\tonHomePress: this.selectFirstIndex,\n\t\t\t\tonDownArrowPress: this._onDownArrowPress,\n\t\t\t\tonLeftArrowPress: this._onLeftArrowPress,\n\t\t\t\tonRightArrowPress: this._onRightArrowPress,\n\t\t\t\tonUpArrowPress: this._onUpArrowPress,\n\t\t\t\ttheme\n\t\t\t}, [ label ]);\n\t\t});\n\t}\n\n\tprivate _validateIndex(currentIndex: number, backwards?: boolean) {\n\t\tconst files = this.properties.files;\n\n\t\tif (files.every((file) => Boolean(file.disabled))) {\n\t\t\treturn null;\n\t\t}\n\n\t\tfunction nextIndex(index: number) {\n\t\t\tif (backwards) {\n\t\t\t\treturn (files.length + (index - 1)) % files.length;\n\t\t\t}\n\t\t\treturn (index + 1) % files.length;\n\t\t}\n\n\t\tlet i = !files[currentIndex] ? files.length - 1 : currentIndex;\n\n\t\twhile (files[i].disabled) {\n\t\t\ti = nextIndex(i);\n\t\t}\n\n\t\treturn i;\n\t}\n\n\tprotected closeIndex(index: number) {\n\t\tconst { onRequestTabClose } = this.properties;\n\t\tconst file = this.properties.files[index];\n\n\t\tonRequestTabClose && onRequestTabClose(file, index);\n\t}\n\n\tprotected selectFirstIndex() {\n\t\tthis.selectIndex(0, true);\n\t}\n\n\tprotected selectIndex(index: number, backwards?: boolean) {\n\t\tconst {\n\t\t\tactiveIndex,\n\t\t\tonRequestTabChange\n\t\t} = this.properties;\n\n\t\tconst validIndex = this._validateIndex(index, backwards);\n\n\t\tif (validIndex !== null && validIndex !== activeIndex) {\n\t\t\tconst file = this.properties.files[validIndex];\n\t\t\tonRequestTabChange && onRequestTabChange(file, validIndex);\n\t\t}\n\t}\n\n\tprotected selectLastIndex() {\n\t\tthis.selectIndex(this.properties.files.length - 1);\n\t}\n\n\tprotected selectNextIndex() {\n\t\tconst { activeIndex } = this.properties;\n\n\t\tthis.selectIndex(activeIndex === this.properties.files.length - 1 ? 0 : activeIndex + 1);\n\t}\n\n\tprotected selectPreviousIndex() {\n\t\tconst { activeIndex } = this.properties;\n\n\t\tthis.selectIndex(activeIndex === 0 ? this.properties.files.length - 1 : activeIndex - 1, true);\n\t}\n\n\trender() {\n\t\tconst { activeIndex } = this.properties;\n\t\tconst validIndex = activeIndex;\n\n\t\tif (validIndex !== null && validIndex !== activeIndex) {\n\t\t\tthis.selectIndex(validIndex);\n\t\t\treturn null;\n\t\t}\n\n\t\tconst children = [\n\t\t\tv('div', {\n\t\t\t\tkey: 'buttons',\n\t\t\t\tclasses: this.classes(css.tabButtons)\n\t\t\t}, this._renderTabButtons())\n\t\t];\n\n\t\tlet alignClass;\n\t\tlet orientation = 'horizontal';\n\n\t\tswitch (this.properties.alignButtons) {\n\t\t\tcase Align.right:\n\t\t\t\talignClass = css.alignRight;\n\t\t\t\torientation = 'vertical';\n\t\t\t\tchildren.reverse();\n\t\t\t\tbreak;\n\t\t\tcase Align.bottom:\n\t\t\t\talignClass = css.alignBottom;\n\t\t\t\tchildren.reverse();\n\t\t\t\tbreak;\n\t\t\tcase Align.left:\n\t\t\t\talignClass = css.alignLeft;\n\t\t\t\torientation = 'vertical';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn v('div', {\n\t\t\t'aria-orientation': orientation,\n\t\t\tclasses: this.classes(\n\t\t\t\tcss.root,\n\t\t\t\talignClass ? alignClass : null\n\t\t\t),\n\t\t\trole: 'tablist'\n\t\t}, children);\n\t}\n}\n"]}