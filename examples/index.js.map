{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/examples/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { assign } from '@dojo/core/lang';\nimport { v, w } from '@dojo/widget-core/d';\nimport { DNode } from '@dojo/widget-core/interfaces';\nimport Projector from '@dojo/widget-core/mixins/Projector';\nimport WidgetBase from '@dojo/widget-core/WidgetBase';\nimport Editor from '../Editor';\nimport project, { Program } from '../project';\nimport Runner, { RunnerProperties } from '../Runner';\n\n/* path to the project directory */\nconst PROJECT_DIRECTORY = '../../../projects/';\n\n/**\n * An example application widget that incorporates both the Editor and Runner widgets into a simplistic UI\n */\nclass App extends WidgetBase {\n\tprivate _compiling = false;\n\tprivate _editorFilename = '';\n\tprivate _program: Program | undefined;\n\tprivate _projectValue = 'dojo2-todo-mvc.project.json';\n\n\t/**\n\t * Returns a set of virtual DOM nodes that are the options for the file select\n\t */\n\tprivate _getFileOptions(): DNode[] {\n\t\treturn project.getFileNames()\n\t\t\t.sort((a, b) => a < b ? -1 : 1)\n\t\t\t.map((filename) => {\n\t\t\t\treturn v('option', { value: filename }, [ filename ]);\n\t\t\t});\n\t}\n\n\t/**\n\t * Handle when the file changes in the dropdown\n\t * @param e The DOM `onchange` event\n\t */\n\tprivate _onchangeFile(e: Event) {\n\t\te.preventDefault();\n\t\tconst select: HTMLSelectElement = e.target as any;\n\t\tthis._editorFilename = select.value;\n\t\tthis.invalidate();\n\t}\n\n\t/**\n\t * Handle when the project name changes in the dropdown\n\t * @param e The DOM `onchange` event\n\t */\n\tprivate _onchangeProject(e: Event) {\n\t\te.preventDefault();\n\t\tconst select: HTMLSelectElement = e.target as any;\n\t\tthis._projectValue = select.value;\n\t}\n\n\t/**\n\t * Handle when the on project load button is clicked\n\t * @param e The DOM `onclick` event\n\t */\n\tprivate _onclickLoad(e: MouseEvent) {\n\t\te.preventDefault();\n\t\tconsole.log(`Loading project \"${this._projectValue}\"...`);\n\t\tproject.load(PROJECT_DIRECTORY + this._projectValue)\n\t\t\t.then(() => {\n\t\t\t\tconsole.log('Project loaded');\n\t\t\t\tthis.invalidate();\n\t\t\t}, (err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\n\t/**\n\t * Handle when the on project run button is clicked\n\t * @param e The DOM `onclick` event\n\t */\n\tprivate _onclickRun(e: MouseEvent) {\n\t\te.preventDefault();\n\t\tconsole.log('Compiling project...');\n\t\tthis._compiling = true;\n\t\tthis.invalidate(); /* this will update the UI so \"Run\" is disabled */\n\t\tproject.getProgram()\n\t\t\t.then((program) => {\n\t\t\t\tthis._program = program;\n\t\t\t\tthis.invalidate(); /* this will cause the properties to the runner to change, starting the run process */\n\t\t\t}, (err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\n\t/**\n\t * Handles when the Runner widget finishes running the project\n\t */\n\tprivate _onRun() {\n\t\tthis._compiling = false;\n\t\tthis.invalidate(); /* this will enable the \"Run\" button in the UI */\n\t}\n\n\trender() {\n\t\tconst isProjectLoaded = project.isLoaded();\n\n\t\t/* A UI to select a project and provide a button to load it */\n\t\tconst projectLoad = v('div', { key: 'projectLoad' }, [\n\t\t\tv('label', { for: 'project' }, [ 'Project to load:' ]),\n\t\t\tv('select', { type: 'text', name: 'project', id: 'project', onchange: this._onchangeProject, disabled: isProjectLoaded ? true : false }, [\n\t\t\t\tv('option', { value: 'dojo-test-app.project.json' }, [ 'Dojo2 Hello World' ]),\n\t\t\t\tv('option', { value: 'dojo2-todo-mvc.project.json', selected: true }, [ 'Dojo2 Todo MVC' ]),\n\t\t\t\tv('option', { value: 'dojo2-todo-mvc-kitchensink.project.json' }, [ 'Dojo2 Kitchensink Todo MVC' ])\n\t\t\t]),\n\t\t\tv('button', { type: 'button', name: 'load-project', id: 'load-project', onclick: this._onclickLoad, disabled: isProjectLoaded ? true : false }, [ 'Load' ])\n\t\t]);\n\n\t\tlet fileSelect: DNode = null;\n\t\t/* If the project is loaded, then we will render a UI which allows selection of the file to edit and a button to run the project */\n\t\tif (isProjectLoaded) {\n\t\t\tfileSelect = v('div', { key: 'fileSelect' }, [\n\t\t\t\tv('div', [\n\t\t\t\t\tv('label', { for: 'select-file' }, [ 'File to display:' ]),\n\t\t\t\t\tv('select', { name: 'select-file', id: 'select-file', onchange: this._onchangeFile }, this._getFileOptions())\n\t\t\t\t]),\n\t\t\t\tv('div', [\n\t\t\t\t\tv('button', { type: 'button', name: 'run', id: 'run', onclick: this._onclickRun, disabled: this._compiling ? true : false }, [ 'Run' ])\n\t\t\t\t])\n\t\t\t]);\n\t\t}\n\n\t\tconst runnerProperties: RunnerProperties = assign({}, this._program, { key: 'runner', onRun: this._onRun });\n\n\t\treturn v('div', [\n\t\t\tprojectLoad,\n\t\t\tfileSelect,\n\t\t\tv('div', {\n\t\t\t\tclasses: {\n\t\t\t\t\twrap: true\n\t\t\t\t},\n\t\t\t\tkey: 'wrap'\n\t\t\t}, [\n\t\t\t\tw(Editor, { filename: this._editorFilename, key: 'editor' }),\n\t\t\t\tw(Runner, runnerProperties)\n\t\t\t])\n\t\t]);\n\t}\n}\n\n/* Mixin a projector to the App and create an instance */\nconst projector = new (Projector(App))();\n\n/* Start the projector and append it to the document.body */\nprojector.append();\n"]}