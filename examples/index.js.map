{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/examples/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { from } from '@dojo/shim/array';\nimport Set from '@dojo/shim/Set';\nimport { v, w } from '@dojo/widget-core/d';\nimport { DNode } from '@dojo/widget-core/interfaces';\nimport Projector from '@dojo/widget-core/mixins/Projector';\nimport WidgetBase from '@dojo/widget-core/WidgetBase';\nimport project, { Program } from '../project';\nimport Workbench from '../Workbench';\nimport { load as loadTheme } from '../support/editorThemes';\nimport { IconJson, load as loadIcons } from '../support/icons';\nimport darkTheme from '../themes/dark/theme';\n\n/* path to the project directory */\nconst PROJECTS_PATH = '../../../projects/';\nconst EDITOR_THEME = '../../data/editor-dark.json';\nconst iconsSourcePath = '../../extensions/vscode-material-icon-theme/out/src/material-icons.json';\n\nlet icons: IconJson;\n\n/**\n * An example application widget that incorporates both the Editor and Runner widgets into a simplistic UI\n */\nclass App extends WidgetBase {\n\tprivate _compiling = false;\n\tprivate _editorFilename = '';\n\tprivate _openFiles = new Set<string>();\n\tprivate _program: Program | undefined;\n\tprivate _projectValue = '005-initial.project.json';\n\n\t/**\n\t * Handle when the project name changes in the dropdown\n\t * @param e The DOM `onchange` event\n\t */\n\tprivate _onchangeProject(e: Event) {\n\t\te.preventDefault();\n\t\tconst select: HTMLSelectElement = e.target as any;\n\t\tthis._projectValue = select.value;\n\t}\n\n\t/**\n\t * Handle when the on project load button is clicked\n\t * @param e The DOM `onclick` event\n\t */\n\tprivate _onclickLoad(e: MouseEvent) {\n\t\te.preventDefault();\n\t\tconsole.log(`Loading project \"${this._projectValue}\"...`);\n\t\tproject.load(PROJECTS_PATH + this._projectValue)\n\t\t\t.then(() => {\n\t\t\t\tconsole.log('Project loaded');\n\t\t\t\tthis.invalidate();\n\t\t\t}, (err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\n\t/**\n\t * Handle when the on project run button is clicked\n\t * @param e The DOM `onclick` event\n\t */\n\tprivate _onclickRun(e: MouseEvent) {\n\t\te.preventDefault();\n\t\tconsole.log('Compiling project...');\n\t\tthis._compiling = true;\n\t\tthis.invalidate(); /* this will update the UI so \"Run\" is disabled */\n\t\tproject.getProgram()\n\t\t\t.then((program) => {\n\t\t\t\tthis._program = program;\n\t\t\t\tthis.invalidate(); /* this will cause the properties to the runner to change, starting the run process */\n\t\t\t}, (err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\n\tprivate _onFileClose(filename: string) {\n\t\tconst { _openFiles } = this;\n\t\t_openFiles.delete(filename);\n\t\tif (this._editorFilename === filename) {\n\t\t\tif (!_openFiles.size) {\n\t\t\t\tthis._editorFilename = '';\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._editorFilename = _openFiles.values().next().value;\n\t\t\t}\n\t\t}\n\t\tthis.invalidate();\n\t}\n\n\tprivate _onFileOpen(filename: string) {\n\t\tif (project.isLoaded() && project.includes(filename)) {\n\t\t\tthis._editorFilename = filename;\n\t\t\tthis._openFiles.add(filename);\n\t\t\tthis.invalidate();\n\t\t}\n\t}\n\n\tprivate _onFileSelect(filename: string) {\n\t\tthis._editorFilename = filename;\n\t\tthis.invalidate();\n\t}\n\n\t/**\n\t * Handles when the Runner widget finishes running the project\n\t */\n\tprivate _onRun() {\n\t\tthis._compiling = false;\n\t\tthis.invalidate(); /* this will enable the \"Run\" button in the UI */\n\t}\n\n\trender() {\n\t\tconst isProjectLoaded = project.isLoaded();\n\n\t\t/* A UI to select a project and provide a button to load it */\n\t\tconst projectLoad = v('div', { key: 'projectLoad' }, [\n\t\t\tv('label', { for: 'project' }, [ 'Project to load:' ]),\n\t\t\tv('select', { type: 'text', name: 'project', id: 'project', onchange: this._onchangeProject, disabled: isProjectLoaded ? true : false }, [\n\t\t\t\tv('option', { value: '005-initial.project.json', selected: true }, [ 'Form widgets tutorial - initial' ]),\n\t\t\t\tv('option', { value: 'dojo-test-app.project.json' }, [ 'Dojo2 Hello World' ]),\n\t\t\t\tv('option', { value: 'dojo2-todo-mvc.project.json' }, [ 'Dojo2 Todo MVC' ]),\n\t\t\t\tv('option', { value: 'dojo2-todo-mvc-tsx.project.json' }, [ 'Dojo 2 JSX Todo MVC' ]),\n\t\t\t\tv('option', { value: 'dojo2-todo-mvc-kitchensink.project.json' }, [ 'Dojo2 Kitchensink Todo MVC' ])\n\t\t\t]),\n\t\t\tv('button', { type: 'button', name: 'load-project', id: 'load-project', onclick: this._onclickLoad, disabled: isProjectLoaded ? true : false }, [ 'Load' ])\n\t\t]);\n\n\t\tlet fileSelect: DNode = null;\n\t\t/* If the project is loaded, then we will render a UI which allows selection of the file to edit and a button to run the project */\n\t\tif (isProjectLoaded) {\n\t\t\tfileSelect = v('div', { key: 'fileSelect' }, [\n\t\t\t\tv('div', [\n\t\t\t\t\tv('button', { type: 'button', name: 'run', id: 'run', onclick: this._onclickRun, disabled: this._compiling ? true : false }, [ 'Run' ])\n\t\t\t\t])\n\t\t\t]);\n\t\t}\n\n\t\treturn v('div', {\n\t\t\tclasses: { app: true }\n\t\t}, [\n\t\t\tprojectLoad,\n\t\t\tfileSelect,\n\t\t\tw(Workbench, {\n\t\t\t\tfilename: this._editorFilename,\n\t\t\t\tfiles: isProjectLoaded ? project.getFileNames() : undefined,\n\t\t\t\ticons,\n\t\t\t\ticonsSourcePath,\n\t\t\t\topenFiles: from(this._openFiles),\n\t\t\t\tprogram: this._program,\n\t\t\t\ttheme: darkTheme,\n\n\t\t\t\tonFileClose: this._onFileClose,\n\t\t\t\tonFileOpen: this._onFileOpen,\n\t\t\t\tonFileSelect: this._onFileSelect,\n\t\t\t\tonRun: this._onRun\n\t\t\t})\n\t\t]);\n\t}\n}\n\n/* Mixin a projector to the App and create an instance */\nconst projector = new (Projector(App))();\n\n(async function () {\n\tawait loadTheme(EDITOR_THEME);\n\ticons = await loadIcons(iconsSourcePath);\n\t/* Start the projector and append it to the document.body */\n\tprojector.append();\n})();\n"]}