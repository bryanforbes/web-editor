{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/examples/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { assign } from '@dojo/core/lang';\nimport { find, includes } from '@dojo/shim/array';\nimport { v, w } from '@dojo/widget-core/d';\nimport { DNode } from '@dojo/widget-core/interfaces';\nimport Projector from '@dojo/widget-core/mixins/Projector';\nimport WidgetBase from '@dojo/widget-core/WidgetBase';\nimport Editor from '../Editor';\nimport FileBar, { FileItem } from '../FileBar';\nimport IconCss from '../IconCss';\nimport TreePane, { TreePaneItem } from '../TreePane';\nimport * as css from '../styles/treepane.m.css';\nimport project, { Program } from '../project';\nimport Runner, { RunnerProperties } from '../Runner';\nimport { IconJson, load as loadIcons } from '../support/icons';\nimport { load as loadTheme } from '../support/themes';\nimport darkTheme from '../themes/dark/theme';\n\n/* path to the project directory */\nconst PROJECT_DIRECTORY = '../../../projects/';\nlet monacoTheme: any;\nlet icons: IconJson;\nconst sourcePath = '../../extensions/vscode-material-icon-theme/out/src/material-icons.json';\n\nfunction addFile(root: TreePaneItem | undefined, filename: string): TreePaneItem {\n\tif (!root) {\n\t\troot = {\n\t\t\tchildren: [],\n\t\t\tid: '',\n\t\t\tlabel: '',\n\t\t\ttitle: ''\n\t\t};\n\t}\n\tconst endsWithPathMarker = /[\\/\\\\]$/.test(filename);\n\tconst parts = filename.split(/[\\/\\\\]/);\n\tconst deliminator = filename.split('/').length === parts.length ? '/' : '\\\\';\n\tconst idParts: string[] = [];\n\tif (parts[0] === '.') {\n\t\tidParts.push(parts.shift()!);\n\t\tif (root.id === '') {\n\t\t\troot = {\n\t\t\t\tchildren: [],\n\t\t\t\tid: '.',\n\t\t\t\tlabel: '.',\n\t\t\t\ttitle: '.'\n\t\t\t};\n\t\t}\n\t}\n\tlet parent = root;\n\twhile (parts.length) {\n\t\tconst currentPart = parts[0];\n\t\tif (!parent.children) {\n\t\t\tparent.children = [];\n\t\t}\n\t\tlet item = find(parent.children, (child) => child.label === currentPart);\n\t\tif (!item) {\n\t\t\titem = {\n\t\t\t\tid: idParts.concat(currentPart).join(deliminator),\n\t\t\t\tlabel: currentPart,\n\t\t\t\ttitle: idParts.concat(currentPart).join(deliminator)\n\t\t\t};\n\t\t\tparent.children.push(item);\n\t\t}\n\t\tparent = item;\n\t\tidParts.push(parts.shift()!);\n\t}\n\tif (endsWithPathMarker && !parent.children) {\n\t\tparent.children = [];\n\t}\n\treturn root;\n}\n\n/**\n * An example application widget that incorporates both the Editor and Runner widgets into a simplistic UI\n */\nclass App extends WidgetBase {\n\tprivate _activeFileIndex = 0;\n\tprivate _compiling = false;\n\tprivate _editorFilename = '';\n\tprivate _expanded = [ '/', '/src' ];\n\tprivate _program: Program | undefined;\n\tprivate _projectValue = 'dojo2-todo-mvc.project.json';\n\tprivate _openFiles: string[] = [];\n\tprivate _selected: string;\n\n\tprivate _getTreeItems(): TreePaneItem {\n\t\tconst files = project.getFileNames();\n\t\treturn files\n\t\t\t.sort((a, b) => a < b ? -1 : 1)\n\t\t\t.reduce((previous, current) => addFile(previous, current), {\n\t\t\t\tid: '',\n\t\t\t\tlabel: '',\n\t\t\t\ttitle: ''\n\t\t\t} as TreePaneItem);\n\t}\n\n\tprivate _getActiveFile(): number {\n\t\treturn this._activeFileIndex;\n\t}\n\n\tprivate _getFileItems(): FileItem[] {\n\t\treturn this._openFiles.map((filename) => {\n\t\t\treturn {\n\t\t\t\tcloseable: true,\n\t\t\t\tkey: filename,\n\t\t\t\tlabel: filename.split(/[\\/\\\\]/).pop()!\n\t\t\t};\n\t\t});\n\t}\n\n\t/**\n\t * Handle when the project name changes in the dropdown\n\t * @param e The DOM `onchange` event\n\t */\n\tprivate _onchangeProject(e: Event) {\n\t\te.preventDefault();\n\t\tconst select: HTMLSelectElement = e.target as any;\n\t\tthis._projectValue = select.value;\n\t}\n\n\t/**\n\t * Handle when the on project load button is clicked\n\t * @param e The DOM `onclick` event\n\t */\n\tprivate _onclickLoad(e: MouseEvent) {\n\t\te.preventDefault();\n\t\tconsole.log(`Loading project \"${this._projectValue}\"...`);\n\t\tproject.load(PROJECT_DIRECTORY + this._projectValue)\n\t\t\t.then(() => {\n\t\t\t\tconsole.log('Project loaded');\n\t\t\t\tthis.invalidate();\n\t\t\t}, (err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\n\t/**\n\t * Handle when the on project run button is clicked\n\t * @param e The DOM `onclick` event\n\t */\n\tprivate _onclickRun(e: MouseEvent) {\n\t\te.preventDefault();\n\t\tconsole.log('Compiling project...');\n\t\tthis._compiling = true;\n\t\tthis.invalidate(); /* this will update the UI so \"Run\" is disabled */\n\t\tproject.getProgram()\n\t\t\t.then((program) => {\n\t\t\t\tthis._program = program;\n\t\t\t\tthis.invalidate(); /* this will cause the properties to the runner to change, starting the run process */\n\t\t\t}, (err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\n\tprivate _onItemOpen(id: string) {\n\t\tthis._selected = id;\n\t\tif (project.isLoaded() && project.includes(id)) {\n\t\t\tif (includes(this._openFiles, id)) {\n\t\t\t\tthis._activeFileIndex = this._openFiles.indexOf(id);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._activeFileIndex = this._openFiles.push(id) - 1;\n\t\t\t}\n\t\t\tthis._editorFilename = id;\n\t\t}\n\t\tthis.invalidate();\n\t}\n\n\tprivate _onItemSelect(id: string) {\n\t\tthis._selected = id;\n\t\tthis.invalidate();\n\t}\n\n\tprivate _onItemToggle(id: string) {\n\t\tif (includes(this._expanded, id)) {\n\t\t\tthis._expanded.splice(this._expanded.indexOf(id), 1);\n\t\t}\n\t\telse {\n\t\t\tthis._expanded.push(id);\n\t\t}\n\t\tthis.invalidate();\n\t}\n\n\tprivate _onRequestTabClose(file: FileItem, index: number) {\n\t\tthis._openFiles.splice(index, 1);\n\t\tthis._activeFileIndex = this._activeFileIndex >= this._openFiles.length ?\n\t\t\tthis._openFiles.length - 1 : this._activeFileIndex === index ?\n\t\t\t\tindex : this._activeFileIndex ?\n\t\t\t\t\tthis._activeFileIndex - 1 : 0;\n\t\tthis._editorFilename = this._openFiles[this._activeFileIndex];\n\t\tthis.invalidate();\n\t}\n\n\tprivate _onRequestTabChange(file: FileItem, index: number) {\n\t\tthis._selected = this._editorFilename = this._openFiles[this._activeFileIndex = index];\n\t\tthis.invalidate();\n\t}\n\n\t/**\n\t * Handles when the Runner widget finishes running the project\n\t */\n\tprivate _onRun() {\n\t\tthis._compiling = false;\n\t\tthis.invalidate(); /* this will enable the \"Run\" button in the UI */\n\t}\n\n\trender() {\n\t\tconst isProjectLoaded = project.isLoaded();\n\n\t\t/* A UI to select a project and provide a button to load it */\n\t\tconst projectLoad = v('div', { key: 'projectLoad' }, [\n\t\t\tv('label', { for: 'project' }, [ 'Project to load:' ]),\n\t\t\tv('select', { type: 'text', name: 'project', id: 'project', onchange: this._onchangeProject, disabled: isProjectLoaded ? true : false }, [\n\t\t\t\tv('option', { value: 'dojo-test-app.project.json' }, [ 'Dojo 2 Hello World' ]),\n\t\t\t\tv('option', { value: 'dojo2-todo-mvc.project.json', selected: true }, [ 'Dojo 2 Todo MVC' ]),\n\t\t\t\tv('option', { value: 'dojo2-todo-mvc-tsx.project.json' }, [ 'Dojo 2 Todo MVC TSX' ]),\n\t\t\t\tv('option', { value: 'dojo2-todo-mvc-kitchensink.project.json' }, [ 'Dojo 2 Kitchensink Todo MVC' ])\n\t\t\t]),\n\t\t\tv('button', { type: 'button', name: 'load-project', id: 'load-project', onclick: this._onclickLoad, disabled: isProjectLoaded ? true : false }, [ 'Load' ])\n\t\t]);\n\n\t\tlet projectRun: DNode = null;\n\t\t/* If the project is loaded, then we will render a UI which allows selection of the file to edit and a button to run the project */\n\t\tif (isProjectLoaded) {\n\t\t\tprojectRun = v('div', { key: 'projectRun' }, [\n\t\t\t\tv('button', { type: 'button', name: 'run', id: 'run', onclick: this._onclickRun, disabled: this._compiling ? true : false }, [ 'Run' ])\n\t\t\t]);\n\t\t}\n\n\t\tconst runnerProperties: RunnerProperties = assign({}, this._program, { key: 'runner', onRun: this._onRun, theme: darkTheme });\n\n\t\treturn v('div', {\n\t\t\tclasses: {\n\t\t\t\t'app': true\n\t\t\t}\n\t\t}, [\n\t\t\tw(IconCss, {\n\t\t\t\tbaseClass: css.labelFixed,\n\t\t\t\ticons,\n\t\t\t\tkey: 'iconcss',\n\t\t\t\tsourcePath\n\t\t\t}),\n\t\t\tprojectLoad,\n\t\t\tprojectRun,\n\t\t\tv('div', {\n\t\t\t\tclasses: {\n\t\t\t\t\twrap: true\n\t\t\t\t},\n\t\t\t\tkey: 'wrap'\n\t\t\t}, [\n\t\t\t\tv('div', {\n\t\t\t\t\tstyles: { flex: '1' }\n\t\t\t\t}, [ w(TreePane, {\n\t\t\t\t\texpanded: [ ...this._expanded ],\n\t\t\t\t\ticons,\n\t\t\t\t\tkey: 'treepane',\n\t\t\t\t\tselected: this._selected,\n\t\t\t\t\tsourcePath,\n\t\t\t\t\troot: isProjectLoaded ? this._getTreeItems() : undefined,\n\t\t\t\t\tonItemOpen: this._onItemOpen,\n\t\t\t\t\tonItemSelect: this._onItemSelect,\n\t\t\t\t\tonItemToggle: this._onItemToggle,\n\t\t\t\t\ttheme: darkTheme\n\t\t\t\t}) ]),\n\t\t\t\tv('div', {\n\t\t\t\t\tstyles: { flex: '1', margin: '0 0.5em' }\n\t\t\t\t}, [\n\t\t\t\t\tthis._openFiles.length ? w(FileBar, {\n\t\t\t\t\t\tactiveIndex: this._getActiveFile(),\n\t\t\t\t\t\tfiles: this._getFileItems(),\n\t\t\t\t\t\tkey: 'filebar',\n\t\t\t\t\t\ttheme: darkTheme,\n\t\t\t\t\t\tonRequestTabClose: this._onRequestTabClose,\n\t\t\t\t\t\tonRequestTabChange: this._onRequestTabChange\n\t\t\t\t\t}) : null,\n\t\t\t\t\tw(Editor, {\n\t\t\t\t\t\tfilename: this._editorFilename,\n\t\t\t\t\t\tkey: 'editor',\n\t\t\t\t\t\toptions: { theme: monacoTheme },\n\t\t\t\t\t\ttheme: darkTheme\n\t\t\t\t\t})\n\t\t\t\t]),\n\t\t\t\tw(Runner, runnerProperties)\n\t\t\t])\n\t\t]);\n\t}\n}\n\n/* Mixin a projector to the App and create an instance */\nconst projector = new (Projector(App))();\n\n(async () => {\n\tmonacoTheme = await loadTheme('../themes/editor-dark.json');\n\ticons = await loadIcons(sourcePath);\n\t/* Start the projector and append it to the document.body */\n\tprojector.append();\n})();\n"]}